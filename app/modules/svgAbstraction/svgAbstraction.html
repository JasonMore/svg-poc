<div>
  <h1 ng-show="!editTemplateName" ng-click="editTemplateName = true">{{template.name}}</h1>
  <div ng-show="editTemplateName" class="input-append">
    <input type="text" ng-show="editTemplateName" ng-model="template.name" >
    <button class="btn" type="button" ng-click="editTemplateName = false">Done</button>
  </div>
</div>

<div class="well">
  <div class="toolbar">
    <div class="dropdown">
      <a class="btn dropdown-toggle"
         ng-class="{active: shapeToDraw}"
         tooltip-placement="bottom"
         tooltip="Draw a Shape">
        <svg style="height:31px; width:31px">
          <path ng-attr-d="{{shapeKeyValues['draw']}}"></path>
        </svg>
      </a>
      <ul class="dropdown-menu inline toolbar-submenu">
        <li ng-repeat="shape in shapePaths">
          <a class="btn"
             ng-class="{active: isActiveShape(shape)}"
             ng-click="drawShape(shape)">
            <svg class="toolbar-icon">
              <path ng-attr-d="{{shape.path}}"></path>
            </svg>
          </a>
        </li>
      </ul>
    </div>
    <div>
      <a class="btn"
         style="line-height: 36px;"
         ng-class="{active: !shapeToDraw}"
         ng-click="shapeToDraw = null"
         tooltip-placement="bottom"
         tooltip="Select">
        <img class="toolbar-icon" src="img/cursor_arrow.png">
      </a>
    </div>
    <div>
      <a class="btn"
         ng-class="{disabled: !copiedShapeModel}"
         ng-click="pasteCopiedShape()"
         tooltip-placement="bottom"
         tooltip="Paste (cmd + v)">
        <svg style="height:31px; width:31px">
          <path ng-attr-d="{{shapeKeyValues['paintBrush']}}"></path>
        </svg>
      </a>
    </div>
  </div>
</div>


<div ng-show="showShapeMenu()"
     ng-style="{top: menuTop(), left: menuLeft()}"
     style="position: absolute;"
    >

  <menu-aim class="dropdown-menu" style="display:block; height:150px">
    <submenu-aim>
      <title-aim>Background</title-aim>
      <content-aim class="popover">
        <shape-options name="Background Color"
                       visible="selectedShape"
                       options="colorOptions"
                       selection="selectedShape.model.backgroundColor"></shape-options>

        <label>
          Image Url
          <input ng-model="selectedShape.model.image.url" debounce>
        </label>


        <a class="btn"
           ng-show="selectedShape.model.image.url"
           ng-click="selectedShape.showPreviewImage = !selectedShape.showPreviewImage">
          Edit Image
        </a>

        <a class="btn"
           ng-show="selectedShape.model.image.url"
           ng-click="selectedShape.model.image.url = null">
          Remove Image
        </a>
      </content-aim>
    </submenu-aim>
    <submenu-aim>
      <title-aim>Border</title-aim>
      <content-aim class="popover">
        <shape-options name="Border Color"
                       visible="selectedShape"
                       options="colorOptions"
                       selection="selectedShape.model.borderColor"></shape-options>
        <label>Border Size
          <input type="range" ng-model="selectedShape.model.borderWidth" max="25">
        </label>
      </content-aim>
    </submenu-aim>
    <submenu-aim>
    <title-aim>Text</title-aim>
    <content-aim class="popover">
      <shape-options name="Font"
                     visible="selectedShape"
                     options="fontFamilyOptions"
                     selection="selectedShape.model.font"></shape-options>
      <label>
        Font Size - {{ selectedShape.model.fontSize }}pt
      </label>
      <button ng-click="fontSize(-1)">-</button>
      <button ng-click="fontSize(1)">+</button>
      <input type="range" ng-model="selectedShape.model.fontSize" min="5.0" max="100" step="1"/>

      <shape-options name="Font Color"
                     visible="selectedShape"
                     options="colorOptions"
                     selection="selectedShape.model.fontColor"></shape-options>

    </content-aim>
  </submenu-aim>
    <submenu-aim>
      <title-aim>Shape</title-aim>
      <content-aim class="popover">
        <label>
          ID:
          <input ng-model="selectedShape.model.id" readonly>
        </label>
        <label>
          Order:
          <input ng-model="selectedShape.model.order" readonly>
        </label>
          <a ng-click="deleteShape()" class="btn btn-warning">
            Click to Delete this shape
          </a>
        <label>
          Text wraps around shape:
          <input type="checkbox" ng-model="selectedShape.model.wrapTextAround">
        </label>
        <a ng-click="copyCurrentShape()" class="btn">
          Copy (cmd + c)
        </a>
        <a ng-click="moveUp(selectedShape)" class="btn">
          Move Shape Up
        </a>
        <a ng-click="moveDown(selectedShape)" class="btn">
          Move Shape Down
        </a>

      </content-aim>
    </submenu-aim>
  </menu-aim>
</div>


<ng-include src="'modules/svgAbstraction/svgCanvas.html'"></ng-include>

<shape-text-editor text-value="selectedShape.model.text"
                      is-editing="selectedShape.isEditingText"
                      font-family="selectedShape.model.fontFamily"
                      font-size="selectedShape.model.fontSize"
                      top="{{selectedShape.top() + 190 || 0}}"
                      left="{{selectedShape.left() || 0}}"
                      width="{{selectedShape.width() || 0}}"
                      height="{{selectedShape.width() || 0}}"></shape-text-editor>

<a style="color:lightgrey" ng-href="" ng-click="debug = !debug">debug</a>
<div ng-show="debug">
  <label>
    Live Update Throttle -
    <input type="text" class="input-small" ng-model="debugThrottle">
    <input type="range" min="0" max="1000" step="25" ng-model="debugThrottle">
  </label>
  <!--<pre>{{ template.shapes | json }}</pre>-->
</div>