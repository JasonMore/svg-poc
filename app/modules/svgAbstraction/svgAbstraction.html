<div>
  <h1 ng-show="!editTemplateName" ng-click="editTemplateName = true">{{template.name}}</h1>
  <div ng-show="editTemplateName" class="input-append">
    <input type="text" ng-show="editTemplateName" ng-model="template.name" >
    <button class="btn" type="button" ng-click="editTemplateName = false">Done</button>
  </div>
</div>

<div class="well">
  <div class="toolbar">
    <div class="dropdown">
      <a class="btn dropdown-toggle"
         ng-class="{active: shapeToDraw}"
         tooltip-placement="bottom"
         tooltip="Draw a Shape">
        <svg style="height:31px; width:31px">
          <path ng-attr-d="{{shapeKeyValues['draw']}}"></path>
        </svg>
      </a>
      <ul class="dropdown-menu inline toolbar-submenu">
        <li ng-repeat="shape in shapePaths">
          <a class="btn"
             ng-class="{active: isActiveShape(shape)}"
             ng-click="drawShape(shape)">
            <svg class="toolbar-icon">
              <path ng-attr-d="{{shape.path}}"></path>
            </svg>
          </a>
        </li>
      </ul>
    </div>
    <div>
      <a class="btn"
         ng-class="{active: !shapeToDraw}"
         tooltip-placement="bottom"
         tooltip="Select">
        <img class="toolbar-icon" src="img/cursor_arrow.png">
      </a>
    </div>
  </div>
</div>


<div ng-show="showShapeMenu()"
     ng-style="{top: menuTop(), left: menuLeft()}"
     style="position: absolute;"
    >

  <menu-aim class="dropdown-menu" style="display:block;">
    <submenu-aim>
      <title-aim>Background</title-aim>
      <content-aim class="popover">
        <!--<h3 class="popover-title">Backgro</h3>-->
        <shape-options name="Background Color"
                       visible="selectedShape"
                       options="colorOptions"
                       selection="selectedShape.model.backgroundColor"></shape-options>

        <label>
          Image Url
          <input ng-model="selectedShape.model.image.url" debounce>
        </label>


        <a class="btn"
           ng-show="selectedShape.model.image.url"
           ng-click="selectedShape.showPreviewImage = !selectedShape.showPreviewImage">
          Edit Image
        </a>

        <a class="btn"
           ng-show="selectedShape.model.image.url"
           ng-click="selectedShape.model.image.url = null">
          Remove Image
        </a>
        <!--<shape-options name="Border Size"-->
        <!--visible="selectedShape"-->
        <!--options="strokeWidthOptions"-->
        <!--selection="selectedShape.borderWidth"></shape-options>-->
      </content-aim>
    </submenu-aim>
    <submenu-aim>
      <title-aim>Border</title-aim>
      <content-aim class="popover">
        <shape-options name="Border Color"
                       visible="selectedShape"
                       options="colorOptions"
                       selection="selectedShape.model.borderColor"></shape-options>
        <label>Border Size
          <input type="range" ng-model="selectedShape.model.borderWidth" max="25">
        </label>
      </content-aim>
    </submenu-aim>
    <submenu-aim>
      <title-aim>Delete Shape</title-aim>
      <content-aim class="popover">
        <label>
          Click to Delete this shape
          <a ng-show="selectedShape" ng-click="deleteShape()" class="btn btn-warning">
            Delete
          </a>
        </label>

      </content-aim>
    </submenu-aim>
  </menu-aim>

  <!--<shape-options name="Font Color"-->
  <!--visible="selectedShape"-->
  <!--options="colorOptions"-->
  <!--selection="selectedShape.fontColor"></shape-options>-->

  <!--<shape-options name="Font Size"-->
  <!--visible="selectedShape"-->
  <!--options="fontSizeOptions"-->
  <!--selection="selectedShape.fontSize"></shape-options>-->

  <!--<shape-options name="Font Family"-->
  <!--visible="selectedShape"-->
  <!--options="fontFamilyOptions"-->
  <!--selection="selectedFontFamily"></shape-options>-->

  <!--<a ng-show="selectedShape" ng-click="deleteShape()" class="btn btn-warning">-->
  <!--Delete-->
  <!--</a>-->
</div>


<ng-svg style="height: 600px" click="unSelectShape()">
  <clip-path model="clip"
             ng-repeat="clip in clips"></clip-path>
  <ng-shape view-model="shape"
            draggable="canDragShape(shape)"
            when-click="setSelectedShape(shape)"
            ng-repeat="shape in shapes"
      ></ng-shape>
  <selection-box view-model="selectedShape"></selection-box>
  <drawing-surface active="isDrawing()"
                   shape="shapeType()"
                   model="shapes"
                   when-done="shapeDrawn(shape);"></drawing-surface>
</ng-svg>

<shape-text-editor text-value="selectedShape.model.text"
                      is-editing="true"
                      font-family="selectedShape.model.fontFamily"
                      font-size="selectedShape.model.fontSize"
                      top="{{selectedShape.top() + 190 || 0}}"
                      left="{{selectedShape.left() || 0}}"
                      width="{{selectedShape.width() || 0}}"
                      height="{{selectedShape.width() || 0}}"></shape-text-editor>

<a style="color:lightgrey" ng-href="" ng-click="debug = !debug">debug</a>
<div ng-show="debug">
  <label>
    Live Update Throttle -
    <input type="text" class="input-small" ng-model="debugThrottle">
    <input type="range" min="0" max="1000" step="25" ng-model="debugThrottle">
  </label>
  <pre>{{ template.shapes | json }}</pre>
</div>